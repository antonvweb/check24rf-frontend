import styles from "@/styles/profile/archiveChecks/archiveChecks.module.css";
import {Receipt} from "@/components/types/interfaces";
import React, {useState} from "react";
import {DownloadModal} from "@/components/ui/profileUI/DownloadModal";

interface ArchiveItemProps {
    id: number;
    date: string;
    count: number;
    checks: Receipt[];
}

export const ArchiveItem = ({id, date, count, checks} :ArchiveItemProps) => {
    const [isOpenDownloadModal, setIsOpenDownloadModal] = useState(false);

    const openOpenDownloadModal   = () => setIsOpenDownloadModal(true);
    const closeOpenDownloadModal  = () => setIsOpenDownloadModal(false);

    return (
        <div className={styles.archiveItem} key={id}>
            <div className={styles.top}>
                <span>{count} Чеков</span>
                <span>{date}</span>
            </div>
            <div className={styles.listChecks}>
                <div className={styles.title}>
                    <span>Список чеков</span>
                </div>
                <div className={styles.itemList}>
                    {checks.map((item) => (
                        <div key={item.id} className={styles.itemDetails}>
                            <span>{item.salesman}</span>
                            <span>{item.date}</span>
                            <span>{item.price}</span>
                        </div>
                    ))}
                </div>
            </div>
            <div className={styles.btnFunc}>
                <button type={"button"} className={styles.unArchiveItem}>
                    <span>Вернуть из архива</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16" fill="none">
                        <path d="M0 4.85714C0 4.62981 0.0856024 4.4118 0.237976 4.25105C0.390349 4.09031 0.597012 4 0.8125 4H12.1875C12.403 4 12.6097 4.09031 12.762 4.25105C12.9144 4.4118 13 4.62981 13 4.85714V6.57143C13 6.79876 12.9144 7.01677 12.762 7.17752C12.6097 7.33827 12.403 7.42857 12.1875 7.42857V13.8571C12.1875 14.4255 11.9735 14.9705 11.5926 15.3724C11.2116 15.7742 10.695 16 10.1562 16H2.84375C2.30503 16 1.78837 15.7742 1.40744 15.3724C1.02651 14.9705 0.8125 14.4255 0.8125 13.8571V7.42857C0.597012 7.42857 0.390349 7.33827 0.237976 7.17752C0.0856024 7.01677 0 6.79876 0 6.57143V4.85714ZM1.625 7.42857V13.8571C1.625 14.1981 1.7534 14.5252 1.98196 14.7663C2.21052 15.0074 2.52052 15.1429 2.84375 15.1429H10.1562C10.4795 15.1429 10.7895 15.0074 11.018 14.7663C11.2466 14.5252 11.375 14.1981 11.375 13.8571V7.42857H1.625ZM12.1875 4.85714H0.8125V6.57143H12.1875V4.85714ZM4.0625 9.57143C4.0625 9.45776 4.1053 9.34876 4.18149 9.26838C4.25767 9.18801 4.36101 9.14286 4.46875 9.14286H8.53125C8.63899 9.14286 8.74233 9.18801 8.81851 9.26838C8.8947 9.34876 8.9375 9.45776 8.9375 9.57143C8.9375 9.68509 8.8947 9.7941 8.81851 9.87447C8.74233 9.95485 8.63899 10 8.53125 10H4.46875C4.36101 10 4.25767 9.95485 4.18149 9.87447C4.1053 9.7941 4.0625 9.68509 4.0625 9.57143Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M6.75281 0.0935185C6.71964 0.0638744 6.68024 0.0403554 6.63686 0.0243079C6.59347 0.00826046 6.54697 -2.62386e-07 6.5 -2.5828e-07C6.45303 -2.54174e-07 6.40652 0.00826048 6.36314 0.024308C6.31976 0.0403554 6.28036 0.0638745 6.24719 0.0935185L4.10472 2.00343C4.03767 2.0632 4 2.14427 4 2.2288C4 2.31333 4.03767 2.3944 4.10472 2.45417C4.17177 2.51394 4.26271 2.54752 4.35753 2.54752C4.45235 2.54752 4.54329 2.51394 4.61034 2.45417L6.14292 1.08731C6.14292 1.08731 6.14292 4.09726 6.14292 4.18168C6.14292 4.2661 6.18054 4.34707 6.24751 4.40677C6.31447 4.46646 6.4053 4.5 6.5 4.5C6.5947 4.5 6.68553 4.46646 6.75249 4.40677C6.81946 4.34707 6.85708 4.2661 6.85708 4.18168L6.85708 1.08731L8.38966 2.45417C8.45671 2.51394 8.54765 2.54752 8.64247 2.54752C8.73729 2.54752 8.82823 2.51394 8.89528 2.45417C8.96233 2.3944 9 2.31333 9 2.2288C9 2.14427 8.96233 2.0632 8.89528 2.00343L6.75281 0.0935185Z" fill="white"/>
                    </svg>
                </button>
                <button type={"button"} className={styles.download} onClick={openOpenDownloadModal}>
                    <span>Скачать</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="14" viewBox="0 0 11 14" fill="none">
                        <path fillRule="evenodd" clipRule="evenodd" d="M1.3125 8.75C1.19647 8.75 1.08519 8.70391 1.00314 8.62186C0.921094 8.53981 0.875 8.42853 0.875 8.3125V1.3125C0.875 1.19647 0.921094 1.08519 1.00314 1.00314C1.08519 0.921094 1.19647 0.875 1.3125 0.875H9.1875C9.30353 0.875 9.41481 0.921094 9.49686 1.00314C9.57891 1.08519 9.625 1.19647 9.625 1.3125V8.3125C9.625 8.42853 9.57891 8.53981 9.49686 8.62186C9.41481 8.70391 9.30353 8.75 9.1875 8.75H7.4375C7.32147 8.75 7.21019 8.79609 7.12814 8.87814C7.04609 8.96019 7 9.07147 7 9.1875C7 9.30353 7.04609 9.41481 7.12814 9.49686C7.21019 9.57891 7.32147 9.625 7.4375 9.625H9.1875C9.5356 9.625 9.86944 9.48672 10.1156 9.24058C10.3617 8.99444 10.5 8.6606 10.5 8.3125V1.3125C10.5 0.964403 10.3617 0.630564 10.1156 0.384422C9.86944 0.138281 9.5356 0 9.1875 0L1.3125 0C0.964403 0 0.630564 0.138281 0.384422 0.384422C0.138281 0.630564 0 0.964403 0 1.3125V8.3125C0 8.6606 0.138281 8.99444 0.384422 9.24058C0.630564 9.48672 0.964403 9.625 1.3125 9.625H3.0625C3.17853 9.625 3.28981 9.57891 3.37186 9.49686C3.45391 9.41481 3.5 9.30353 3.5 9.1875C3.5 9.07147 3.45391 8.96019 3.37186 8.87814C3.28981 8.79609 3.17853 8.75 3.0625 8.75H1.3125Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M4.94031 13.8722C4.98095 13.913 5.02923 13.9453 5.08238 13.9674C5.13554 13.9894 5.19252 14.0008 5.25006 14.0008C5.30761 14.0008 5.36459 13.9894 5.41774 13.9674C5.4709 13.9453 5.51917 13.913 5.55981 13.8722L8.18481 11.2472C8.26696 11.1651 8.31312 11.0537 8.31312 10.9375C8.31312 10.8213 8.26696 10.7099 8.18481 10.6277C8.10266 10.5456 7.99124 10.4994 7.87506 10.4994C7.75889 10.4994 7.64746 10.5456 7.56531 10.6277L5.68756 12.5064V4.8125C5.68756 4.69647 5.64147 4.58519 5.55942 4.50314C5.47738 4.42109 5.3661 4.375 5.25006 4.375C5.13403 4.375 5.02275 4.42109 4.94071 4.50314C4.85866 4.58519 4.81256 4.69647 4.81256 4.8125V12.5064L2.93481 10.6277C2.85266 10.5456 2.74124 10.4994 2.62506 10.4994C2.50889 10.4994 2.39747 10.5456 2.31531 10.6277C2.23316 10.7099 2.18701 10.8213 2.18701 10.9375C2.18701 11.0537 2.23316 11.1651 2.31531 11.2472L4.94031 13.8722Z" fill="white"/>
                    </svg>
                </button>
            </div>

            {isOpenDownloadModal && (
                <>
                    <div className={styles.modalOverlay} onClick={closeOpenDownloadModal} />
                    <DownloadModal isVisible={true} close={closeOpenDownloadModal}/>
                </>
            )}
        </div>
    )
}